<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[OOP] 컴파운드 패턴 | jcheolho</title>
    <meta name="description" content="헤드퍼스트 디자인패턴에 등장하는 컴파운드 패턴에 대한 설명">
    <meta name="naver-site-verification" content="7e110cedb4998b81af3cbe9ab2db1b6789334e77">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="apple-mobile-web-app-title" content="MY APPLE TITLE">
  <meta name="theme-color" content="MY COLOR THEME">
  <meta name="msapplication-navbutton-color" content="MY COLOR THEME">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="coverage" content="WorldWide">
  <meta name="rating" content="general">
  <meta name="robots" content="index,follow">
  <meta name="googlebot" content="index,follow">
  <meta name="application-name" content="MY APP NAME">
  <meta name="msapplication-TileColor" content="MY COLOR THEME">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="msapplication-square70x70logo" content="/favicon/ms-icon-70x70.png">
  <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
  <meta name="msapplication-square150x150logo" content="/favicon/mstile-150x150.png">
  <meta name="msapplication-wide310x150logo" content="/favicon/ms-icon-310x310.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@ktquez">
  <meta property="fb:app_id" content="MY FACEBOOK APP ID">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="MY SITE NAME">
  <meta property="og:image:height" content="1200">
  <meta property="og:image:width" content="360">
  <meta property="og:image:type" content="image/png">
  <meta name="google-site-verification" content="SK1Dxps2G8JE4dN1BZISZg9_VW99typSNHvfcOOY_w0">
  <meta name="msvalidate.01" content="MY VERIFICATION KEY">
  <meta name="yandex-verification" content="MY VERIFICATION KEY">
  <link rel="publisher" href="MY URL GOOGLE PLUS">
  <link rel="author" href="MY URL GOOGLE PLUS">
  <link rel="author" href="/humans.txt">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon/android-icon-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ff5733">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <link rel="alternate" href="https://cheolhojung.github.io/" hreflang="ko">
  <link rel="preconnect" href="https://connect.facebook.net/">
  <link rel="preconnect" href="https://platform.twitter.com/">
  <link rel="preconnect" href="https://widget.sndcdn.com/">
  <link rel="preconnect" href="https://api-widget.soundcloud.com/">
  <link rel="preconnect" href="https://www.youtube.com/">
  <link rel="preconnect" href="https://scrimba.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/">
  <link rel="preconnect" href="https://c.disquscdn.com/">
  <link rel="preconnect" href="https://disqus.com/">
  <link rel="preconnect" href="https://www.google-analytics.com/">
  <link rel="preconnect" href="https://stats.g.doubleclick.net">
  <link rel="preload" href="https://www.google-analytics.com/analytics.js" as="script">
    
    <link rel="preload" href="/assets/css/0.styles.39056704.css" as="style"><link rel="preload" href="/assets/js/app.c640637f.js" as="script"><link rel="preload" href="/assets/js/12.626b5e49.js" as="script"><link rel="preload" href="/assets/js/3.06c00a72.js" as="script"><link rel="preload" href="/assets/js/11.51d92635.js" as="script"><link rel="preload" href="/assets/js/10.bcc76e3b.js" as="script"><link rel="preload" href="/assets/js/15.5a29a81b.js" as="script"><link rel="preload" href="/assets/js/1.20803773.js" as="script"><link rel="preload" href="/assets/js/5.ad177317.js" as="script"><link rel="preload" href="/assets/js/6.4d3db085.js" as="script"><link rel="preload" href="/assets/js/16.43cd2892.js" as="script"><link rel="preload" href="/assets/js/80.eeee78dc.js" as="script"><link rel="preload" href="/assets/js/7.f13dd13e.js" as="script"><link rel="preload" href="/assets/js/2.2fffe96b.js" as="script"><link rel="preload" href="/assets/js/9.4f228ef2.js" as="script"><link rel="preload" href="/assets/js/13.b46f7785.js" as="script"><link rel="preload" href="/assets/js/4.0568f140.js" as="script"><link rel="prefetch" href="/assets/js/100.17e13a1b.js"><link rel="prefetch" href="/assets/js/101.0c4fa094.js"><link rel="prefetch" href="/assets/js/102.35b21269.js"><link rel="prefetch" href="/assets/js/103.04bcbe48.js"><link rel="prefetch" href="/assets/js/104.8154bf5c.js"><link rel="prefetch" href="/assets/js/105.e7d82916.js"><link rel="prefetch" href="/assets/js/106.9cfc8d7d.js"><link rel="prefetch" href="/assets/js/107.09785a88.js"><link rel="prefetch" href="/assets/js/108.6e9f6bc5.js"><link rel="prefetch" href="/assets/js/109.a6806ae3.js"><link rel="prefetch" href="/assets/js/110.f34d9ce0.js"><link rel="prefetch" href="/assets/js/111.e1e4cddb.js"><link rel="prefetch" href="/assets/js/112.d897e393.js"><link rel="prefetch" href="/assets/js/113.14dfe44a.js"><link rel="prefetch" href="/assets/js/114.1c809d2e.js"><link rel="prefetch" href="/assets/js/115.9cce978b.js"><link rel="prefetch" href="/assets/js/116.7f2117e9.js"><link rel="prefetch" href="/assets/js/117.5c50e47c.js"><link rel="prefetch" href="/assets/js/118.9b51c73d.js"><link rel="prefetch" href="/assets/js/119.30a8c91d.js"><link rel="prefetch" href="/assets/js/120.d8d82749.js"><link rel="prefetch" href="/assets/js/121.5e10ae63.js"><link rel="prefetch" href="/assets/js/122.0af73dfc.js"><link rel="prefetch" href="/assets/js/123.54b34230.js"><link rel="prefetch" href="/assets/js/124.d9703d5a.js"><link rel="prefetch" href="/assets/js/125.c3650b95.js"><link rel="prefetch" href="/assets/js/126.03ab653a.js"><link rel="prefetch" href="/assets/js/127.60f759b7.js"><link rel="prefetch" href="/assets/js/128.bfa63a6e.js"><link rel="prefetch" href="/assets/js/129.9c705d5f.js"><link rel="prefetch" href="/assets/js/130.e66eb9df.js"><link rel="prefetch" href="/assets/js/131.70e3f31f.js"><link rel="prefetch" href="/assets/js/132.60510dc7.js"><link rel="prefetch" href="/assets/js/133.a0168ac9.js"><link rel="prefetch" href="/assets/js/134.e422e5a5.js"><link rel="prefetch" href="/assets/js/135.7a39ea46.js"><link rel="prefetch" href="/assets/js/136.679c3588.js"><link rel="prefetch" href="/assets/js/137.621282dc.js"><link rel="prefetch" href="/assets/js/138.42f128e5.js"><link rel="prefetch" href="/assets/js/139.aeebc62f.js"><link rel="prefetch" href="/assets/js/14.a6da2988.js"><link rel="prefetch" href="/assets/js/140.62e38a55.js"><link rel="prefetch" href="/assets/js/141.151fadd6.js"><link rel="prefetch" href="/assets/js/142.ff048fea.js"><link rel="prefetch" href="/assets/js/143.b9e08d70.js"><link rel="prefetch" href="/assets/js/144.102c1499.js"><link rel="prefetch" href="/assets/js/145.7d9cf036.js"><link rel="prefetch" href="/assets/js/146.64eda04c.js"><link rel="prefetch" href="/assets/js/147.72b70ca8.js"><link rel="prefetch" href="/assets/js/148.8f66d4bb.js"><link rel="prefetch" href="/assets/js/149.061442eb.js"><link rel="prefetch" href="/assets/js/150.7afbfd26.js"><link rel="prefetch" href="/assets/js/151.a76b119c.js"><link rel="prefetch" href="/assets/js/152.8b20d21d.js"><link rel="prefetch" href="/assets/js/153.a2fe86eb.js"><link rel="prefetch" href="/assets/js/154.6f263798.js"><link rel="prefetch" href="/assets/js/155.a21eff5e.js"><link rel="prefetch" href="/assets/js/156.4f1e5aca.js"><link rel="prefetch" href="/assets/js/157.d7d5090b.js"><link rel="prefetch" href="/assets/js/158.4c92d4eb.js"><link rel="prefetch" href="/assets/js/159.4d42ff5d.js"><link rel="prefetch" href="/assets/js/160.297b8ef9.js"><link rel="prefetch" href="/assets/js/161.ea1fdea0.js"><link rel="prefetch" href="/assets/js/162.be8bd5e0.js"><link rel="prefetch" href="/assets/js/163.a54e6088.js"><link rel="prefetch" href="/assets/js/164.db69c5c1.js"><link rel="prefetch" href="/assets/js/17.fb3e90f7.js"><link rel="prefetch" href="/assets/js/18.4147dab8.js"><link rel="prefetch" href="/assets/js/19.3f673583.js"><link rel="prefetch" href="/assets/js/20.50cf5aa7.js"><link rel="prefetch" href="/assets/js/21.ec0828f7.js"><link rel="prefetch" href="/assets/js/22.964dd3ed.js"><link rel="prefetch" href="/assets/js/23.527fb23a.js"><link rel="prefetch" href="/assets/js/24.dd0f762b.js"><link rel="prefetch" href="/assets/js/25.5ad57b6e.js"><link rel="prefetch" href="/assets/js/26.80b09aef.js"><link rel="prefetch" href="/assets/js/27.4099c702.js"><link rel="prefetch" href="/assets/js/28.483383ef.js"><link rel="prefetch" href="/assets/js/29.cd43b2dc.js"><link rel="prefetch" href="/assets/js/30.887e6137.js"><link rel="prefetch" href="/assets/js/31.3594e022.js"><link rel="prefetch" href="/assets/js/32.32ae255e.js"><link rel="prefetch" href="/assets/js/33.8874e780.js"><link rel="prefetch" href="/assets/js/34.8d58d0d3.js"><link rel="prefetch" href="/assets/js/35.9fc65452.js"><link rel="prefetch" href="/assets/js/36.932157ff.js"><link rel="prefetch" href="/assets/js/37.24a28821.js"><link rel="prefetch" href="/assets/js/38.ef9892a4.js"><link rel="prefetch" href="/assets/js/39.329cca05.js"><link rel="prefetch" href="/assets/js/40.de231385.js"><link rel="prefetch" href="/assets/js/41.03a3a0f8.js"><link rel="prefetch" href="/assets/js/42.f91035a5.js"><link rel="prefetch" href="/assets/js/43.a97e7a8c.js"><link rel="prefetch" href="/assets/js/44.9dc742c3.js"><link rel="prefetch" href="/assets/js/45.24eac84e.js"><link rel="prefetch" href="/assets/js/46.a98a5a88.js"><link rel="prefetch" href="/assets/js/47.dad0b4c3.js"><link rel="prefetch" href="/assets/js/48.65f68c2e.js"><link rel="prefetch" href="/assets/js/49.58ab34ce.js"><link rel="prefetch" href="/assets/js/50.416fabbb.js"><link rel="prefetch" href="/assets/js/51.988fbab5.js"><link rel="prefetch" href="/assets/js/52.40a3d906.js"><link rel="prefetch" href="/assets/js/53.73b40ca1.js"><link rel="prefetch" href="/assets/js/54.f63342b4.js"><link rel="prefetch" href="/assets/js/55.38e927ee.js"><link rel="prefetch" href="/assets/js/56.e3b33d85.js"><link rel="prefetch" href="/assets/js/57.4e516550.js"><link rel="prefetch" href="/assets/js/58.2125246a.js"><link rel="prefetch" href="/assets/js/59.4872821f.js"><link rel="prefetch" href="/assets/js/60.e0073a56.js"><link rel="prefetch" href="/assets/js/61.1032a170.js"><link rel="prefetch" href="/assets/js/62.b04bd945.js"><link rel="prefetch" href="/assets/js/63.827e9179.js"><link rel="prefetch" href="/assets/js/64.52867520.js"><link rel="prefetch" href="/assets/js/65.8dd27b1f.js"><link rel="prefetch" href="/assets/js/66.117a7113.js"><link rel="prefetch" href="/assets/js/67.0b3e1068.js"><link rel="prefetch" href="/assets/js/68.863956c0.js"><link rel="prefetch" href="/assets/js/69.c35eb00c.js"><link rel="prefetch" href="/assets/js/70.f19afe5a.js"><link rel="prefetch" href="/assets/js/71.215cc689.js"><link rel="prefetch" href="/assets/js/72.6427c952.js"><link rel="prefetch" href="/assets/js/73.2a373368.js"><link rel="prefetch" href="/assets/js/74.285bfa42.js"><link rel="prefetch" href="/assets/js/75.90e6de4f.js"><link rel="prefetch" href="/assets/js/76.abc76c53.js"><link rel="prefetch" href="/assets/js/77.fe2a049c.js"><link rel="prefetch" href="/assets/js/78.4cb9f55e.js"><link rel="prefetch" href="/assets/js/79.d572f896.js"><link rel="prefetch" href="/assets/js/81.7faa1654.js"><link rel="prefetch" href="/assets/js/82.b0a60d35.js"><link rel="prefetch" href="/assets/js/83.63c44040.js"><link rel="prefetch" href="/assets/js/84.1888e859.js"><link rel="prefetch" href="/assets/js/85.23f595c9.js"><link rel="prefetch" href="/assets/js/86.b798d1c2.js"><link rel="prefetch" href="/assets/js/87.e5604a64.js"><link rel="prefetch" href="/assets/js/88.42cda24e.js"><link rel="prefetch" href="/assets/js/89.ddc76d32.js"><link rel="prefetch" href="/assets/js/90.eff0de42.js"><link rel="prefetch" href="/assets/js/91.8b60c5cc.js"><link rel="prefetch" href="/assets/js/92.47762022.js"><link rel="prefetch" href="/assets/js/93.ba925c13.js"><link rel="prefetch" href="/assets/js/94.49c80c61.js"><link rel="prefetch" href="/assets/js/95.51989d73.js"><link rel="prefetch" href="/assets/js/96.c5981319.js"><link rel="prefetch" href="/assets/js/97.612fe779.js"><link rel="prefetch" href="/assets/js/98.1730e8fd.js"><link rel="prefetch" href="/assets/js/99.44eb576b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.39056704.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div itemscope="itemscope" itemtype="https://schema.org/WebPage" class="layout-main"><meta itemprop="name" content="jcheolho"> <meta itemprop="alternateName" content="jcheolho"> <meta itemprop="url" content="https://cheolhojung.github.io"> <nav aria-label="Navigation" itemscope="itemscope" itemtype="https://schema.org/SiteNavigationElement" class="container nav-mobile" style="display:none;"><span itemprop="headline" class="nav-mobile__title">Navigation</span> <ul class="nav-mobile__list"><li class="nav-mobile__item"><a href="/about/" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">ABOUT</span></a></li><li class="nav-mobile__item"><a href="/categories/" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">CATEGORIES</span></a></li><li class="nav-mobile__item"><a href="/categories/algorithm.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">Algorithm</span></a></li><li class="nav-mobile__item"><a href="/categories/book.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">Book</span></a></li><li class="nav-mobile__item"><a href="/categories/java.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">Java</span></a></li><li class="nav-mobile__item"><a href="/categories/record.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">기록</span></a></li><li class="nav-mobile__item"><a href="/categories/til.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">TIL</span></a></li><li class="nav-mobile__item"><a href="/categories/vuejs.html" itemprop="url" class="nav-mobile__link"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text">Vue.js</span></a></li></ul></nav> <div class="container-fluid wrapper-body__nm"><header itemscope="itemscope" itemtype="https://schema.org/Organization" class="header"><!----> <div class="row header-top"><div class="column xs-33 sm-20"><div class="hamburguer header-top__hamburguer"><div class="hamburguer__wrapper"><span class="hamburguer__line"></span> <span class="hamburguer__line"></span> <span class="hamburguer__line"></span></div></div> <!----></div> <div class="column xs-33 sm-60"><div class="header__logo"><a href="/" itemprop="url" class="header-top-logo__link router-link-active"><img itemprop="logo" src="/ktquez-play-logo.png" srcset="/ktquez-play-logo.png 1x, /ktquez-play-logo@2x.png 2x" alt="Logo in 3 colors in play format"></a></div> <meta itemprop="name" content="jcheolho"> <meta itemprop="sameAs" content="https://github.com/CheolHoJung"></div> <div class="column xs-33 sm-20"><div class="search header-top__search"><!----> <span class="icon search__icon">search</span></div> <div class="switch-bw header-top__toggle"><span class="switch-bw__text">
    Turn on night mode
  </span> <label for="switch-bw" class="switch-bw__label"><input type="checkbox" id="switch-bw" name="switch-bw" aria-labelledby="switch-bw-text" class="switch-bw__input"> <span class="switch-bw__ball"></span> <span id="switch-bw-text" hidden="hidden">switch to black or white</span></label></div></div></div></header> <main id="main" itemscope="itemscope" itemtype="https://schema.org/Blog" class="main-page"><div><a href="#main" class="vue-skip-to">Skip to main content</a> <div><div class="page page__full row justify-right"><article itemscope="itemscope" itemprop="blogPost" itemtype="https://schema.org/BlogPosting" class="column xs-100 page__full__box box-default"><meta itemprop="mainEntityOfPage" content="/posts/java/compound.html"> <header class="page-header page__full-header"><button type="button" class="ui-button reset-button back-button"><span class="icon back-button__icon icon--arrow">arrow</span> <span class="back-button__text">Back</span></button> <div class="page-header__meta"><time datetime="Fri Mar 30 2018 21:10:00 GMT+0900 (GMT+09:00)" itemprop="datePublished" class="text">
                
            </time> <meta itemprop="dateModified" content="currentPost.updated_at"> <!----></div> <h1 itemprop="name headline" class="page-header__title">[OOP] 컴파운드 패턴</h1> <div class="page-header-cat"><nav class="page-header-cat__nav"><ul class="page-header-cat__list"><li class="page-header-cat__item"><a href="/categories/java.html" itemprop="keywords" class="page-header-cat__link meta-text">
                  Java
                </a></li></ul></nav></div> <div itemprop="author" itemscope="itemscope" itemtype="https://schema.org/Person" class="page-header__author"><strong>Author: </strong> <a href="/authors/jcheolho.html" rel="author" itemprop="url" class="link link--filler-s-primary"><span itemprop="name">정철호</span></a></div></header> <!----> <!----> <section class="page-content page__full-content"><div class="row"><div class="column no-pad-l sm-50 post-share"><div class="observer"><!----> <!----> <!----></div></div> <!----></div> <div class="row"><div class="column no-pad-l md-75 xl-67 post-content"><div class="post-content__box-player"><!----></div> <div class="post-content__excerpt"><!----></div> <div class="post-content__table-contents"><div class="table-contents"><h3 id="table-of-content" class="table-contents__title">Table of contents</h3> <nav><ol class="table-contents__list"><li class="table-contents__item"><a href="#정의" title="정의" class="table-contents__link"><span>정의</span></a></li><li class="table-contents__item"><a href="#오리-프로그램" title="오리 프로그램" class="table-contents__link"><span>오리 프로그램</span></a></li><li class="table-contents__item"><a href="#어댑터-패턴을-적용한-오리같은-거위" title="어댑터 패턴을 적용한 오리같은 거위" class="table-contents__link"><span>어댑터 패턴을 적용한 오리같은 거위</span></a></li><li class="table-contents__item"><a href="#데코레이터-패턴을-적용한-꽥소리-카운터" title="데코레이터 패턴을 적용한 꽥소리 카운터" class="table-contents__link"><span>데코레이터 패턴을 적용한 꽥소리 카운터</span></a></li><li class="table-contents__item"><a href="#팩토리-패턴을-적용하여-꽥학자를-안심시키자" title="팩토리 패턴을 적용하여 꽥학자를 안심시키자" class="table-contents__link"><span>팩토리 패턴을 적용하여 꽥학자를 안심시키자</span></a></li><li class="table-contents__item"><a href="#이터레이터와-컴포지트-패턴을-적용한-오리떼" title="이터레이터와 컴포지트 패턴을 적용한 오리떼" class="table-contents__link"><span>이터레이터와 컴포지트 패턴을 적용한 오리떼</span></a></li><li class="table-contents__item"><a href="#옵저버-패턴을-적용한-개별-오리-관리" title="옵저버 패턴을 적용한 개별 오리 관리" class="table-contents__link"><span>옵저버 패턴을 적용한 개별 오리 관리</span></a></li><li class="table-contents__item"><a href="#의문점" title="의문점" class="table-contents__link"><span>의문점</span></a></li></ol></nav></div></div> <div itemprop="articleBody"><div class="content custom"><p>지난 포스팅에선 객체에 대한 접근을 제어하는 프록시 패턴에 대해 알아보았다. 이번에는 여러 패턴을 섞어서 강력한 객체지향 디자인을 만드는 컴파운드 패턴에 대해 복습한다.</p> <h2 id="정의"><a href="#정의" aria-hidden="true" class="header-anchor">#</a> 정의</h2> <p>컴파운드 패턴은 <strong>두 개 이상의 패턴을 결합하여 일반적으로 자주 등장하는 문제들에 대한 해법을 제공한다</strong>. 컴파운드 패턴은 딱히 정해진 의미, 단점, 장점이 뚜렷하지 않다. 패턴을 잘 활용하기 위해 서로 다른 패턴을 섞어 쓰는 디자인 방법이기 떄문이다.</p> <p><strong>다만 주의할 점은 패턴 몇 개를 결합해서 쓴다고 해서 무조건 컴파운드 패턴이 되는 것은 아니다</strong>. 컴파운드 패턴이라고 불릴 수 있으려면 <strong>여러 가지 문제를 해결하기 위한 용도로 쓰일 수 있는 일반적인 해결책이어야 한다</strong>. 웹에서 벌어지는 다양한 요청과 이에 대응하는 로직을 처리하고 처리 결과를 브라우저로 보여주기 위한 MVC패턴이 대표적이다.</p> <h2 id="오리-프로그램"><a href="#오리-프로그램" aria-hidden="true" class="header-anchor">#</a> 오리 프로그램</h2> <p>다양한 오리들이 존재하는 프로그램에 대해 살펴보자. 처음에는 오리만 존재한다. 이후 요청사항이 계속 추가되면서 거위를 오리처럼 취급해야하고, 오리들이 꽥소리를 내는 횟수를 세야하고, 오리떼를 관리해야하고, 꽥소리에 대한 알림을 받아야 하는 등의 문제에 패턴을 적용하면서 해결해나간다.</p> <ul><li>모든 Duck 객체에서 구현해야 하는 인터페이스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Quackable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Quackable을 구현한 Duck 클래스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MallardDuck</span> <span class="token keyword">implements</span> <span class="token class-name">Quackable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Quack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>완전한 오리는 아니지만 오리의 행동을 할 수 있는 오리 호출기, 고무 오리 등</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DuckCall</span> <span class="token keyword">implements</span> <span class="token class-name">Quackable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;kwak&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> calss RubberDuck <span class="token keyword">implements</span> <span class="token class-name">Quackable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Squack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>첫번째 예시는 패턴을 적용하지 않은 기본적인 디자인이다. 오리와 거위와 같은 가금류들은 서로 잘 몰려다닌다. 오리에게 친구를 만들어주기 위해 거위를 추가하려고한다. 그러나, <strong>현재 Quackable은 오리만을 위한 인터페이스이므로 서로 다른 인터페이스간의 호환이 필요하다</strong>.</p> <h2 id="어댑터-패턴을-적용한-오리같은-거위"><a href="#어댑터-패턴을-적용한-오리같은-거위" aria-hidden="true" class="header-anchor">#</a> 어댑터 패턴을 적용한 오리같은 거위</h2> <p><strong>어댑터 패턴을 적용하여 거위를 마치 오리처럼 다룰 수 있도록 하기 위해 어댑터 패턴을 적용해보자</strong>.</p> <ul><li>거위 클래스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goose</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">honk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Honk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>거위용 어댑터</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GooseAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">Quackable</span> <span class="token punctuation">{</span> <span class="token comment">// 타겟 = Quackable</span>
    Goose goose<span class="token punctuation">;</span> <span class="token comment">// 어댑티</span>
        
    <span class="token keyword">public</span> <span class="token function">GooseAdapter</span><span class="token punctuation">(</span>Goose goose<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>goose <span class="token operator">=</span> goose<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        goose<span class="token punctuation">.</span><span class="token function">honk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>변환결과가 될 타겟 인터페이스는 Quackable이며 변환되는 어댑티는 Goose이다</strong>. Quackable과 오리에는 quack() 메소드를 이용해 소리를 내지만, 거위는 honk() 메소드를 사용해서 소리를 낸다. 어댑터 패턴이 적용되어 Goose 객체를 만들고 Quackable을 구현하는 인터페이스로 감싸면 거위를 오리처럼 다룰 수 있게된다.  이번에는 꽥학자들이 <strong>오리들이 낸 꽥소리의 총 회수를 세어서 연구하고 싶다고한다</strong>. 그러기 위해서는 오리의 quack() 메소드가 호출 되는 횟수를 세어야한다.</p> <h2 id="데코레이터-패턴을-적용한-꽥소리-카운터"><a href="#데코레이터-패턴을-적용한-꽥소리-카운터" aria-hidden="true" class="header-anchor">#</a> 데코레이터 패턴을 적용한 꽥소리 카운터</h2> <p><strong>오리 클래스는 그대로 두면서 행동을 확장하기 위해 데코레이터 패턴을 적용해보자.</strong></p> <ul><li>데코레이터</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 데코레이터 = QuackCounter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuackCounter</span> implments Quackable <span class="token punctuation">{</span> <span class="token comment">// 컴포넌트 = Quackable</span>
    Quackable duck<span class="token punctuation">;</span> <span class="token comment">// 구상 컴포넌트</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> numberOfQuacks<span class="token punctuation">;</span> <span class="token comment">// 오리떼의 메소드 호출회수</span>

    <span class="token keyword">public</span> <span class="token function">QuackCounter</span><span class="token punctuation">(</span>Quackable duck<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>duck <span class="token operator">=</span> duck<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        duck<span class="token punctuation">.</span><span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        numberOfQuacks<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getQuacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> numberOfQuacks<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>꽥소리카운터는 컴포넌트인 Quackable을 구현해야 한다</strong>. 또한, 확장의 대상이 되는 <strong>quack() 메소드를 호출하기 위해 구상 컴포넌트와의 의존성을 설정한다</strong>. 거위는 Quackable을 구현하지 않기 때문에 데코레이터로 감쌀 수 없다.</p> <p>꽥학자들에게 꽥소리카운터를 전달했더니 이 디자인은 <strong>모든 오리를 일일이 카운터로 감싸야만 정확한 카운터를 셀 수 있다며 항의한다</strong>. 만약 실수로 데코레이터로 오리를 감싸지 않는다면, 해당 오리의 카운터는 세어지지 않는다. 이처럼 <strong>데코레이터를 사용할 때는 객체들을 제대로 포장하지 않으면 의도치 않은 동작을 수행한다.</strong></p> <h2 id="팩토리-패턴을-적용하여-꽥학자를-안심시키자"><a href="#팩토리-패턴을-적용하여-꽥학자를-안심시키자" aria-hidden="true" class="header-anchor">#</a> 팩토리 패턴을 적용하여 꽥학자를 안심시키자</h2> <p>꽥학자들의 의견을 고려하여 <strong>오리 객체를 생성하는 작업을 한 군데에서 몰아서 담당하기 위해 팩토리 패턴을 적용해보자</strong>. <strong>오리를 생성하고 데코레이터로 감싸는 부분을 따로 빼내서 캡슐화한다</strong>.</p> <ul><li>추상 팩토리</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractDuckFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> Quackable <span class="token function">createMallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> Quackable <span class="token function">createDuckCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> Quackable <span class="token function">createRubberDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>카운터 데코레이터로 감싸지 않은 오리를 만드는 팩토리</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DuckFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractDuckFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> Quackable <span class="token function">createMallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Quackable <span class="token function">createDuckCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DuckCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Quackable <span class="token function">createRubberDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RubberDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>카운터 데코레이터로 감싼 오리를 만드는 팩토리</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountingDuckFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractDuckFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> Quackable <span class="token function">createMallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QuackCounter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Quackable <span class="token function">createDuckCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QuackCounter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DuckCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Quackable <span class="token function">createRubberDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QuackCounter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RubberDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>꽥학자에게 제공되는 팩토리는 CountingDuckFactory 클래스이다. 해당 팩토리는 모든 메소드에서 오리를 카운터 데코레이터로 감싼 뒤 반환한다. 꽥학자는 반환되는 오리가 데코레이터를 포함하는 오리라는 것을 알 수 없지만, 실제 인스턴스는 카운터 데코레이터로 감싼 오리이기 때문에 꽥꽥거린 회수를 전부 셀 수 있다.</p> <p>점점 오리들의 세계가 커지고 있다. 시간이 지날수록 오리의 종류가 많아지는 것을 고려하여 오리 객체를 종류별로 분류 하기 위해 <strong>오리떼를 일괄적으로 관리하려고한다</strong>. <strong>오리들로 구성된 컬렉션, 또는 그 컬렉션의 부분 컬렉션을 다룰 수 있는 방법이 필요하다</strong>. <strong>여러 오리들에 대한 정보를 한번에 출력한다든가 하는 작업을 적용할 수 있으면 더 좋다</strong>.</p> <h2 id="이터레이터와-컴포지트-패턴을-적용한-오리떼"><a href="#이터레이터와-컴포지트-패턴을-적용한-오리떼" aria-hidden="true" class="header-anchor">#</a> 이터레이터와 컴포지트 패턴을 적용한 오리떼</h2> <p>오리떼의 <strong>부분과 전체를 다루기 위해 컴포지트 패턴을 적용하고, 반복 작업을 처리하기 위해 이터레이터 패턴을 적용해보자.</strong></p> <ul><li>컴포지트 인터페이스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 복합 객체 = Flock</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Flock</span> implments Quackable <span class="token punctuation">{</span>
    ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>Quackable<span class="token punctuation">&gt;</span></span> quackers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Quackable quacker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        quackers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>quacker<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Iterator<span class="token generics function"><span class="token punctuation">&lt;</span>Quackable<span class="token punctuation">&gt;</span></span> iter <span class="token operator">=</span> quackers<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Quackable quackable <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            quacker<span class="token punctuation">.</span><span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Flock은 오리떼를 관리하는 컬렉션 역할을 한다</strong>. quack() 메소드를 호출하면 재귀적으로 자식요소의 quack() 메소드를 호출한다. <strong>Flock에 오리들을 추가하여 quack()을 호출하면 해당 컬렉션에 들어있는 모든 오리들이 quack() 메소드 수행하여 꽥소리를 낸다</strong>.</p> <p>이제 오리의 세계에서는 어댑터를 이용해 거위를 오리처럼 다루는게 가능해졌고, 데코레이터를 이용해 오리가 꽥꽥 거리는 회수를 세는게 가능해졌고, 팩토리를 이용해 데코레이터의 기능을 확실하게 사용하기 위해 오리를 포장하는게 가능해졌고, 이터레이터와 컴포지트를 이용해 오리떼를 관리하는게 가능해졌다. <strong>마지막으로 꽥학자들이 오리들이 quack() 메소드를 수행하여 꽥소리를 냈을 때, 어떤 오리가 꽥소리를 냈는지 연락을 받고싶다고 한다.</strong></p> <h2 id="옵저버-패턴을-적용한-개별-오리-관리"><a href="#옵저버-패턴을-적용한-개별-오리-관리" aria-hidden="true" class="header-anchor">#</a> 옵저버 패턴을 적용한 개별 오리 관리</h2> <p>어느 꽥학자가 오리들을 개별 단위로 관리하고 싶어한다. 오리들이 꽥소리를 냈을 때, 어떤 오리가 낸 소리인지 연락을 받고 싶다고 한다. 꽥꽥거리는 오리를 실시간으로 추적하기 위해 옵저버 패턴을 적용해보자.</p> <ul><li>연락을 전달하는 주제를 의미하는 Observable 인터페이스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">QuackObservable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerObserver</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 옵저버 등록</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 연락 송신</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>꽥소리를 낼 수 있는 Quakable이 주제가 된다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Quackable</span> <span class="token keyword">extends</span> <span class="token class-name">QuackObservable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이번엔 옵저버 패턴의 정석과는 다르게, 일일이 등록 및 연락용 메소드를 구현하지 않고 <strong>Observable 보조 클래스에 캡슐화한다.</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Observable</span> <span class="token keyword">implements</span> <span class="token class-name">QuackObservable</span> <span class="token punctuation">{</span>
    ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>Observer<span class="token punctuation">&gt;</span></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QuackObservable duck<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Observable</span><span class="token punctuation">(</span>QuackObservable duck<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 주제 설정</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>duck <span class="token operator">=</span> duck<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerObserver</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 옵저버 추가</span>
        observers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 연락</span>
        Iterator<span class="token generics function"><span class="token punctuation">&lt;</span>Observer<span class="token punctuation">&gt;</span></span> iter <span class="token operator">=</span> observers<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Observer observer <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>duck<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Observable 보조 클래스를 오리와 결합</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MallardDuck</span> <span class="token keyword">implements</span> <span class="token class-name">Quackable</span><span class="token punctuation">{</span>
   Observable observable<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token function">MallardDuck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      observable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Quack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerObserver</span><span class="token punctuation">(</span>Observer observer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      observable<span class="token punctuation">.</span><span class="token function">registerObserver</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      observable<span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위 코드는 옵저버의 정석적인 디자인과는 약간 다르게 구성되었다. 주제가 될 모든 오리에서 일일히 옵저버를 등록하고 연락을 전달하는 메소드를 구현하는건 비효율적이다. 효율성을 높이기 위해 Observable이라는 보조 클래스에 해당 작업들을 캡슐화한다. 이렇게 하면 <strong>실제 코드는 한 군데에만 작성해 놓고, 필요한 작업을 해당 클래스에 위임할 수 있다.</strong></p> <ul><li>연락을 전달받을 옵저버</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>QuackObservable duck<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Quackologist</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>QUackObservable duck<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Quackologist : &quot;</span> <span class="token operator">+</span> duck <span class="token operator">+</span> <span class="token string">&quot; just quacked.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>꽥학자는 이제 옵저버로서 시스템에 참여한다.</p> <p>지금까지 오리 시뮬레이터의 기능을 구현하기 위해 이용한 패턴 적용 작업들은 다음과 같다.</p> <blockquote><p>거위가 등장해서 자기도 Quackable이 되고 싶다고 요청</p></blockquote> <p>어댑터 패턴을 이용해 거위를 Quackable에 맞게 구현했다. 거위를 어댑터로 감싸면서 quack() 메소드를 호출하면 자동으로 honk() 메소드가 호출된다.</p> <blockquote><p>꽥학자들이 꽥소리 회수를 세고싶다고 요청</p></blockquote> <p>데코레이터 패턴을 이용해서 QuackCounter 데코레이터를 추가했다. quack() 메소드 호출 자체는 그 데코레이터로 싸여져 있는 Quackable에 의해 처리한 뒤, 카운터 데코레이터가 호출된 회수를 셀 수 있게 되었다.</p> <blockquote><p>꽥학자들이 QuackCounter로 장식되지 않은 Quackble 객체가 있을 수도 있음을 걱정</p></blockquote> <p>추상 팩토리 패턴을 적용해서 객체를 만들도록 구성했다. 오리 객체를 만들 때는 팩토리를 이용해야한다.</p> <blockquote><p>모든 Quackable 객체들을 관리하는 게 힘들어지기 시작</p></blockquote> <p>컴포지트 패턴을 적용해서 오리들을 모아서 오리떼 단위로 관리하도록 구성했다. 수많은 오리들을 부분적으로 관리할 수도 있으며 이터레이터를 이용해 반복작업까지 처리할 수 있게 되었다.</p> <blockquote><p>꽥학자들이 Quackable에서 꽥소리를 냈을 때 그런 일이 있다는 것을 연락 받고 싶어함</p></blockquote> <p>옵저버 패턴을 적용해서 Quackologist를 Quackable의 옵저버로 등록하여 연락을 받을 수 있도록 구성했다. Quackable에서 꽥소리를 낼 때마다 연락을 받을 수 있게 되었으며 주제에서 연락을 돌릴 때 이터레이터 패턴을 이용했다.</p> <h2 id="의문점"><a href="#의문점" aria-hidden="true" class="header-anchor">#</a> 의문점</h2> <blockquote><p>여기서 쓰인 게 정말 컴파운드 패턴인가?</p></blockquote> <p>오리 프로그램은 그냥 여러가지 패턴을 섞어서 사용했을 뿐, 컴파운드 패턴이라고 할 순 없다. 컴파운드 패턴이라고 할 수 있으려면 몇 개의 패턴을 복합적으로 사용해서 일반적인 문제를 해결할 수 있는 것이어야 한다.</p> <blockquote><p>어떤 문제가 닥쳤을 때 여러 디자인 패턴을 적용하다 보면 해결이 가능한가?</p></blockquote> <p>앞에서 여러 가지 패턴을 사용한 이유는 그냥 여러 패턴을 함께 사용할 수 있다는 것을 보여준 예시일 뿐이다. 실전에서는 이런 식으로 디자인을 하는 일은 없을 것이다. <strong>상황에 따른 올바른 객체지향 디자인 원칙을 적용하는 것만으로도 문제가 해결되기도 한다. 중요한 것은 패턴은 반드시 상황에 맞게 써야 한다는 것이다</strong>.</p></div></div></div> <div class="column no-pad-r sm-25 xl-33 xsNone smNone post-sidebar"><!----></div> <aside class="column xs-100"><hr class="divider"> <div><div class="observer"><!----> <!----> <!----></div></div> <hr class="divider"> <section class="post-content__disqus"><h3>Leave us a comment, what do you think?</h3> <!----></section></aside></div></section></article></div> <section class="row section-newsletter justify-center"><div class="column sm-100 md-67 xl-50"><div class="newsletter"><span class="meta-text meta-text--primary">Stay in</span> <h2 class="newsletter__title">Receive our articles, videos and more directly in your inbox and stay up to date.</h2> <form method="post" action="MY_ACTION_FOR_ENGLISH_USERS" class="newsletter__form"><label for="email_news-1575797005906" class="newsletter__label"><input type="email" name="EMAIL" id="email_news-1575797005906" required="required" placeholder="Enter your email here" aria-label="Enter your email here" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        subscribe
      </button></form></div></div></section> <aside class="container main"></aside></div> <!----> <div class="elevator"><a class="elevator__link"><span class="icon elevator__icon">greaterthan</span></a></div> <!----></div></main> <footer class="footer"><div class="footer-box1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 161" class="footer-box__shape"><path d="M-11.925-4809v-154.746c40.454,19.75,273.683,130.936,420.544,142.612,161.25,12.821,339.978-42.709,521.543-86.3,169.82-40.769,395.43,29.2,423.912,38.429v60Z" transform="translate(11.926 4970)"></path></svg></div> <div class="footer-box2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 246" class="footer-box__shape"><path d="M-1505.5-4725.5v-238.1c8.149-3.133,18.138-5.059,29.672-5.9h30.954c201.21,11.667,696.6,224.535,855.572,236.458,205.129,15.385,287.179-164.1,432.047-175.625a42.381,42.381,0,0,1,16.756,1.857V-4725.5Z" transform="translate(1506 4971)"></path></svg> <ul class="footer-social__list"><li class="footer-social__item"><a href="https://github.com/CheolHoJung" target="_blank" rel="noopener external" title="Follow us on Facebook"><span class="icon footer-social__icon">github</span></a></li></ul></div> <section class="footer-box3"><div class="row"><div class="column sm-50 footer-card"><div class="observer"><div class="spinner observer__spinner"><div class="double-bounce1"></div> <div class="double-bounce2"></div></div> <!----> <!----></div></div> <div class="column sm-50 footer-nav"><div class="row justify-right"><div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--1"><h2 class="meta-text title">Jcheolho blog</h2> <nav class="footer-nav1"><ul><li class="footer-nav1__item"><a href="/about/">ABOUT</a> <!----></li><li class="footer-nav1__item"><a href="/categories/">CATEGORIES</a> <!----></li></ul></nav></div> <!----></div></div> <div class="column sm-100 footer-copy">2018 © jcheolho - 
        <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">
          MADE WITH VUEPRESS
        </a></div></div> <span class="shapes shapes--circle" style="left: 3%; top: -20%"></span> <span class="shapes shapes--primary shapes--color3" style="left: 30%; top: -15%"></span> <span class="shapes shapes--primary" style="left: 13%; top: -80%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle shapes--color4" style="left: 40%; top: 200px"></span> <span class="shapes shapes--primary" style="left: 15%; bottom: 10%; transform: rotate(75deg)"></span> <span class="shapes shapes--circle shapes--color3" style="right: 50%; top: 30%"></span> <span class="shapes shapes--primary" style="right: 20%; top: -100%"></span> <span class="shapes shapes--circle" style="right: 10%; top: -20%"></span> <span class="shapes shapes--color4" style="right: 35%; top: -20%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle" style="left: 40%; top: -50%"></span> <span class="shapes shapes--color3" style="right: 30%; top: 20%"></span> <span class="shapes shapes--circle shapes--primary" style="right: 30%; bottom: 20%"></span></section></footer></div> <!----> <!----></div></div>
    <script src="/assets/js/app.c640637f.js" defer></script><script src="/assets/js/12.626b5e49.js" defer></script><script src="/assets/js/3.06c00a72.js" defer></script><script src="/assets/js/11.51d92635.js" defer></script><script src="/assets/js/10.bcc76e3b.js" defer></script><script src="/assets/js/15.5a29a81b.js" defer></script><script src="/assets/js/1.20803773.js" defer></script><script src="/assets/js/5.ad177317.js" defer></script><script src="/assets/js/6.4d3db085.js" defer></script><script src="/assets/js/16.43cd2892.js" defer></script><script src="/assets/js/80.eeee78dc.js" defer></script><script src="/assets/js/7.f13dd13e.js" defer></script><script src="/assets/js/2.2fffe96b.js" defer></script><script src="/assets/js/9.4f228ef2.js" defer></script><script src="/assets/js/13.b46f7785.js" defer></script><script src="/assets/js/4.0568f140.js" defer></script>
  </body>
</html>
